{"version":3,"sources":["webpack:///F:/工作文件/宠善堂小程序端/cstUser/components/mc-image-upload/mc-image-upload.vue?ad07","webpack:///F:/工作文件/宠善堂小程序端/cstUser/components/mc-image-upload/mc-image-upload.vue?d6cb","webpack:///F:/工作文件/宠善堂小程序端/cstUser/components/mc-image-upload/mc-image-upload.vue?ae3a","webpack:///F:/工作文件/宠善堂小程序端/cstUser/components/mc-image-upload/mc-image-upload.vue?abbb","webpack:///F:/工作文件/宠善堂小程序端/cstUser/components/mc-image-upload/mc-image-upload.vue","webpack:///F:/工作文件/宠善堂小程序端/cstUser/components/mc-image-upload/mc-image-upload.vue?0834","webpack:///F:/工作文件/宠善堂小程序端/cstUser/components/mc-image-upload/mc-image-upload.vue?a2a1"],"names":["_self","name","props","data","imageBasePos","x0","y0","w","h","showMoveImage","moveImagePath","moveLeft","moveTop","deltaLeft","deltaTop","dragIndex","targetImageIndex","states","computed","posMoveImageLeft","posMoveImageTop","isShowDel","enableDel","isShowAdd","enableAdd","value","limit","length","isDragable","enableDrag","isFirstLabel","firstImageLabel","methods","selectImage","console","log","uni","chooseImage","count","success","e","imagePathArr","tempFilePaths","availableImageNumber","showToast","title","icon","mask","duration","i","push","serverUrl","remoteIndexStart","promiseWorkList","keyname","fileKeyName","completeImages","Promise","resolve","reject","remoteUrlIndex","uploadFile","url","fileType","formData","filePath","res","statusCode","JSON","parse","accessUrl","showUploadProgress","fail","all","then","result","$emit","currentImages","allImages","deleteImage","imageIndex","deletedImagePath","splice","currentImage","previewImage","current","indicator","loop","urls","initImageBasePos","paddingRate","getSystemInfo","obj","screenWidth","leftPadding","Math","ceil","imageWidth","findOverlapImage","posX","posY","rows","floor","cols","indx","isDragging","start","currentTarget","dataset","index","basePosY","currentImageOffsetTop","offsetTop","target","offsetLeft","move","touch","touches","clientX","clientY","stop"],"mappings":"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","file":"components/mc-image-upload/mc-image-upload.js","sourcesContent":["import { render, staticRenderFns } from \"./mc-image-upload.vue?vue&type=template&id=dd097446&\"\nimport script from \"./mc-image-upload.vue?vue&type=script&lang=js&\"\nexport * from \"./mc-image-upload.vue?vue&type=script&lang=js&\"\nimport style0 from \"./mc-image-upload.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\HBuilderX 开发工具\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"E:\\\\HBuilderX 开发工具\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('dd097446', component.options)\n    } else {\n      api.reload('dd097446', component.options)\n    }\n    module.hot.accept(\"./mc-image-upload.vue?vue&type=template&id=dd097446&\", function () {\n      api.rerender('dd097446', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"F:/工作文件/宠善堂小程序端/cstUser/components/mc-image-upload/mc-image-upload.vue\"\nexport default component.exports","export * from \"-!E:\\\\HBuilderX 开发工具\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\HBuilderX 开发工具\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!E:\\\\HBuilderX 开发工具\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\HBuilderX 开发工具\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX 开发工具\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./mc-image-upload.vue?vue&type=template&id=dd097446&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.value, function(path, index) {\n    var m0 = _vm.isDragging(index)\n    return {\n      $orig: _vm.__get_orig(path),\n      m0: m0\n    }\n  })\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0\n      }\n    }\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!E:\\\\HBuilderX 开发工具\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX 开发工具\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX 开发工具\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX 开发工具\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX 开发工具\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./mc-image-upload.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\HBuilderX 开发工具\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX 开发工具\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX 开发工具\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX 开发工具\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX 开发工具\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./mc-image-upload.vue?vue&type=script&lang=js&\"","//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n\r\nvar _self;\r\n\r\nexport default {\r\n\tname: 'robby-image-upload',\r\n\tprops: ['value', 'enableDel', 'enableAdd', 'enableDrag', 'serverUrl', 'formData', 'limit', 'fileKeyName', 'showUploadProgress', 'firstImageLabel'],\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\timageBasePos: {\r\n\t\t\t\tx0: -1,\r\n\t\t\t\ty0: -1,\r\n\t\t\t\tw: -1,\r\n\t\t\t\th: -1\r\n\t\t\t},\r\n\t\t\tshowMoveImage: false,\r\n\t\t\tmoveImagePath: '',\r\n\t\t\tmoveLeft: 0,\r\n\t\t\tmoveTop: 0,\r\n\t\t\tdeltaLeft: 0,\r\n\t\t\tdeltaTop: 0,\r\n\t\t\tdragIndex: null,\r\n\t\t\ttargetImageIndex: null,\r\n\t\t\t//上传的状态\r\n\t\t\tstates: []\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\tposMoveImageLeft: function() {\r\n\t\t\treturn this.moveLeft + 'px';\r\n\t\t},\r\n\t\tposMoveImageTop: function() {\r\n\t\t\treturn this.moveTop + 'px';\r\n\t\t},\r\n\t\tisShowDel: function() {\r\n\t\t\tif (this.enableDel === false) {\r\n\t\t\t\treturn false;\r\n\t\t\t} else {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t},\r\n\t\tisShowAdd: function() {\r\n\t\t\tif (this.enableAdd === false) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t//  因为组件里value没有数据的时候，为空，没有length值，设置为空数组\r\n\t\t\tif (!this.value) {\r\n\t\t\t\tthis.value = [];\r\n\t\t\t}\r\n\r\n\t\t\tif (this.limit && this.value.length >= this.limit) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tisDragable: function() {\r\n\t\t\tif (this.enableDrag === false) {\r\n\t\t\t\treturn false;\r\n\t\t\t} else {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t},\r\n\t\tisFirstLabel: function() {\r\n\t\t\tif (this.firstImageLabel) {\r\n\t\t\t\treturn true;\r\n\t\t\t} else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tselectImage: function() {\r\n\t\t\t_self = this;\r\n\t\t\tconsole.log(_self.limit);\r\n\t\t\tif (!_self.value) {\r\n\t\t\t\t_self.value = [];\r\n\t\t\t}\r\n\r\n\t\t\tuni.chooseImage({\r\n\t\t\t\tcount: _self.limit ? _self.limit - _self.value.length : 20, //默认最大图片上传数量\r\n\t\t\t\tsuccess: function(e) {\r\n\t\t\t\t\tvar imagePathArr = e.tempFilePaths;\r\n\r\n\t\t\t\t\t//如果设置了limit限制，在web上count参数无效，这里做判断控制选择的数量是否合要求\r\n\t\t\t\t\t//在非微信小程序里，虽然可以选多张，但选择的结果会被截掉\r\n\t\t\t\t\t//在app里，会自动做选择数量的限制\r\n\t\t\t\t\tif (_self.limit) {\r\n\t\t\t\t\t\tvar availableImageNumber = _self.limit - _self.value.length;\r\n\t\t\t\t\t\tif (availableImageNumber < imagePathArr.length) {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '图片总数限制为' + _self.limit + '张，当前还可以选' + availableImageNumber + '张',\r\n\t\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\t\tmask: false,\r\n\t\t\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor (let i = 0; i < imagePathArr.length; i++) {\r\n\t\t\t\t\t\t_self.value.push(imagePathArr[i]);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//检查服务器地址是否设置，设置即表示图片要上传到服务器\r\n\t\t\t\t\tif (_self.serverUrl) {\r\n\t\t\t\t\t\tvar remoteIndexStart = _self.value.length - imagePathArr.length;\r\n\t\t\t\t\t\tvar promiseWorkList = [];\r\n\t\t\t\t\t\tvar keyname = _self.fileKeyName ? _self.fileKeyName : 'file';\r\n\t\t\t\t\t\tvar completeImages = 0;\r\n\r\n\t\t\t\t\t\tfor (let i = 0; i < imagePathArr.length; i++) {\r\n\t\t\t\t\t\t\tpromiseWorkList.push(\r\n\t\t\t\t\t\t\t\tnew Promise((resolve, reject) => {\r\n\t\t\t\t\t\t\t\t\tlet remoteUrlIndex = remoteIndexStart + i;\r\n\t\t\t\t\t\t\t\t\tuni.uploadFile({\r\n\t\t\t\t\t\t\t\t\t\turl: _self.serverUrl, //上床的服务器文件路径\r\n\t\t\t\t\t\t\t\t\t\tfileType: 'image',\r\n\t\t\t\t\t\t\t\t\t\tformData: _self.formData,\r\n\t\t\t\t\t\t\t\t\t\tfilePath: imagePathArr[i],\r\n\t\t\t\t\t\t\t\t\t\tname: keyname,\r\n\t\t\t\t\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (res.statusCode === 200) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconst data = JSON.parse(res.data);\r\n\t\t\t\t\t\t\t\t\t\t\t\t_self.value[remoteUrlIndex] = data.accessUrl;\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tcompleteImages++;\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (_self.showUploadProgress) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: '上传进度：' + completeImages + '/' + imagePathArr.length,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmask: false,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tduration: 1000\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('success to upload image: ' + res.data);\r\n\t\t\t\t\t\t\t\t\t\t\t\tresolve('success to upload image:' + remoteUrlIndex);\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('fail to upload image:' + res.data);\r\n\t\t\t\t\t\t\t\t\t\t\t\treject('failt to upload image:' + remoteUrlIndex);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\tfail: function(res) {\r\n\t\t\t\t\t\t\t\t\t\t\tconsole.log('fail to upload image:' + res);\r\n\t\t\t\t\t\t\t\t\t\t\treject('failt to upload image:' + remoteUrlIndex);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tPromise.all(promiseWorkList).then(result => {\r\n\t\t\t\t\t\t\t_self.$emit('add', {\r\n\t\t\t\t\t\t\t\tcurrentImages: imagePathArr,\r\n\t\t\t\t\t\t\t\tallImages: _self.value\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t_self.$emit('input', _self.value);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t_self.$emit('add', {\r\n\t\t\t\t\t\t\tcurrentImages: imagePathArr,\r\n\t\t\t\t\t\t\tallImages: _self.value\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t_self.$emit('input', _self.value);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tdeleteImage: function(e) {\r\n\t\t\tvar imageIndex = e;\r\n\t\t\tvar deletedImagePath = this.value[imageIndex];\r\n\t\t\tthis.value.splice(imageIndex, 1);\r\n\r\n\t\t\tthis.$emit('delete', {\r\n\t\t\t\tcurrentImage: deletedImagePath,\r\n\t\t\t\tallImages: this.value\r\n\t\t\t});\r\n\t\t\tthis.$emit('input', this.value);\r\n\t\t},\r\n\t\tpreviewImage: function(e) {\r\n\t\t\tvar imageIndex = e;\r\n\t\t\tconsole.log(e);\r\n\t\t\tuni.previewImage({\r\n\t\t\t\tcurrent: this.value[imageIndex],\r\n\r\n\t\t\t\tindicator: 'number',\r\n\t\t\t\tloop: 'true',\r\n\r\n\t\t\t\turls: this.value\r\n\t\t\t});\r\n\t\t},\r\n\t\tinitImageBasePos: function() {\r\n\t\t\tlet paddingRate = 0.024;\r\n\t\t\t_self = this;\r\n\t\t\t//计算图片基准位置\r\n\t\t\tuni.getSystemInfo({\r\n\t\t\t\tsuccess: function(obj) {\r\n\t\t\t\t\tlet screenWidth = obj.screenWidth;\r\n\t\t\t\t\tlet leftPadding = Math.ceil(paddingRate * screenWidth);\r\n\t\t\t\t\tlet imageWidth = Math.ceil((screenWidth - 2 * leftPadding) / 4);\r\n\r\n\t\t\t\t\t_self.imageBasePos.x0 = leftPadding;\r\n\t\t\t\t\t_self.imageBasePos.w = imageWidth;\r\n\t\t\t\t\t_self.imageBasePos.h = imageWidth;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tfindOverlapImage: function(posX, posY) {\r\n\t\t\tlet rows = Math.floor((posX - this.imageBasePos.x0) / this.imageBasePos.w);\r\n\t\t\tlet cols = Math.floor((posY - this.imageBasePos.y0) / this.imageBasePos.h);\r\n\t\t\tlet indx = cols * 4 + rows;\r\n\t\t\treturn indx;\r\n\t\t},\r\n\t\tisDragging: function(indx) {\r\n\t\t\treturn this.dragIndex === indx;\r\n\t\t},\r\n\t\tstart: function(e) {\r\n\t\t\tif (!this.isDragable) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.dragIndex = e.currentTarget.dataset.index;\r\n\t\t\tthis.moveImagePath = this.value[this.dragIndex];\r\n\t\t\tthis.showMoveImage = true;\r\n\r\n\t\t\t//计算纵向图片基准位置\r\n\t\t\tif (this.imageBasePos.y0 === -1) {\r\n\t\t\t\tthis.initImageBasePos();\r\n\r\n\t\t\t\tlet basePosY = Math.floor(this.dragIndex / 4) * this.imageBasePos.h;\r\n\t\t\t\tlet currentImageOffsetTop = e.currentTarget.offsetTop;\r\n\t\t\t\tthis.imageBasePos.y0 = currentImageOffsetTop - basePosY;\r\n\t\t\t}\r\n\r\n\t\t\t//设置选中图片当前左上角的坐标\r\n\t\t\tthis.moveLeft = e.target.offsetLeft;\r\n\t\t\tthis.moveTop = e.target.offsetTop;\r\n\t\t},\r\n\t\tmove: function(e) {\r\n\t\t\tif (!this.isDragable) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst touch = e.touches[0];\r\n\t\t\tthis.targetImageIndex = this.findOverlapImage(touch.clientX, touch.clientY);\r\n\r\n\t\t\t//初始化deltaLeft/deltaTop\r\n\t\t\tif (this.deltaLeft === 0) {\r\n\t\t\t\tthis.deltaLeft = touch.clientX - this.moveLeft;\r\n\t\t\t\tthis.deltaTop = touch.clientY - this.moveTop;\r\n\t\t\t}\r\n\r\n\t\t\t//设置移动图片位置\r\n\t\t\tthis.moveLeft = touch.clientX - this.deltaLeft;\r\n\t\t\tthis.moveTop = touch.clientY - this.deltaTop;\r\n\t\t},\r\n\t\tstop: function(e) {\r\n\t\t\tif (!this.isDragable) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (this.dragIndex !== null && this.targetImageIndex !== null) {\r\n\t\t\t\tif (this.targetImageIndex < 0) {\r\n\t\t\t\t\tthis.targetImageIndex = 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.targetImageIndex >= this.value.length) {\r\n\t\t\t\t\tthis.targetImageIndex = this.value.length - 1;\r\n\t\t\t\t}\r\n\t\t\t\t//交换图片\r\n\t\t\t\tif (this.dragIndex !== this.targetImageIndex) {\r\n\t\t\t\t\tthis.value[this.dragIndex] = this.value[this.targetImageIndex];\r\n\t\t\t\t\tthis.value[this.targetImageIndex] = this.moveImagePath;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.dragIndex = null;\r\n\t\t\tthis.targetImageIndex = null;\r\n\t\t\tthis.deltaLeft = 0;\r\n\t\t\tthis.deltaTop = 0;\r\n\t\t\tthis.showMoveImage = false;\r\n\r\n\t\t\tthis.$emit('input', this.value);\r\n\t\t}\r\n\t}\r\n};\r\n","import mod from \"-!E:\\\\HBuilderX 开发工具\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\HBuilderX 开发工具\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-1!E:\\\\HBuilderX 开发工具\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\HBuilderX 开发工具\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\HBuilderX 开发工具\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\HBuilderX 开发工具\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX 开发工具\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./mc-image-upload.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!E:\\\\HBuilderX 开发工具\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\HBuilderX 开发工具\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-1!E:\\\\HBuilderX 开发工具\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\HBuilderX 开发工具\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\HBuilderX 开发工具\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\HBuilderX 开发工具\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX 开发工具\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./mc-image-upload.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}